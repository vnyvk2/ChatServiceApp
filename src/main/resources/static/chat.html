<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat - ChatService</title>
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
<div class="chat-container" id="chat-section">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="user-info">
            <span id="current-user">Loading...</span>
            <select id="status-select" onchange="updateStatus()">
                <option value="ONLINE">ðŸŸ¢ Online</option>
                <option value="AWAY">ðŸŸ¡ Away</option>
                <option value="OFFLINE">âš« Offline</option>
            </select>
            <button onclick="logout()">Logout</button>
        </div>

        <h3>My Rooms</h3>
        <div id="room-list"></div>
        <button onclick="showCreateRoom()">+ Create Room</button>
        <button onclick="showJoinRoom()">+ Join Room</button>
        <button onclick="showDirectMessage()">+ Direct Message</button>
    </div>

    <!-- Chat Area -->
    <div class="main-content">
        <h2 id="current-room-name">Select a room</h2>
        <div id="chat-messages"></div>
        <div id="typing-indicator" class="hidden"></div>
        <div id="chat-input-area" class="hidden">
            <input type="text" id="message-input" onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <!-- Members -->
    <div id="members-panel" class="sidebar hidden">
        <h3>Room Members (<span id="room-members-count">0</span>)</h3>
        <div id="online-users"></div>
    </div>
</div>

<!-- Modals -->
<div id="modal-overlay" class="hidden"></div>
<div id="create-room-modal" class="modal hidden">
    <input type="text" id="room-name" placeholder="Room Name">
    <textarea id="room-description"></textarea>
    <select id="room-type">
        <option value="GROUP_CHAT">Group Chat</option>
        <option value="BROADCAST">Broadcast</option>
    </select>
    <input type="checkbox" id="room-private"> Private?
    <button onclick="createRoom()">Create</button>
    <button onclick="closeModals()">Cancel</button>
</div>
<div id="join-room-modal" class="modal hidden">
    <div id="available-rooms"></div>
</div>
<div id="direct-message-modal" class="modal hidden">
    <input type="text" id="dm-phone" placeholder="Phone Number">
    <input type="text" id="dm-username" placeholder="Username">
    <button onclick="createDirectMessage()">Start</button>
    <button onclick="closeModals()">Cancel</button>
</div>

<!-- Toast -->
<div id="toast-container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="assets/js/app.js"></script>
</body>
</html>
